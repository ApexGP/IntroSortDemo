# 内省排序算法演示

这个项目实现了内省排序（Introsort）算法，该算法结合了快速排序、堆排序和插入排序的优点，是一种高效的混合排序算法。

## 项目结构

```
IntroSortDemo/
├── include/             # 头文件目录
│   ├── Sort.h           # 排序基类
│   └── ExSort.h         # 扩展排序类
├── src/                 # 源代码目录
│   ├── Sort.cpp         # 排序基类实现
│   ├── ExSort.cpp       # 扩展排序类实现
│   └── main.cpp         # 主程序
└── test/                # 测试目录
    └── test_sort.cpp    # 排序测试程序
```

## 排序算法

内省排序（Introsort）是一种混合排序算法，它具有以下特点：

1. 当数组规模较大时使用快速排序，利用其平均情况下 O(n log n)的高效性能
2. 当递归深度超过阈值（通常为 2\*log2(n)）时切换到堆排序，避免快排在最坏情况下的 O(n²)性能
3. 当数组规模较小（<=16 个元素）时使用插入排序，因为在小数组上插入排序更高效

该算法结合了这些排序算法的优点，保证了 O(n log n)的时间复杂度。

## 编译和运行

### 编译

```bash
mkdir -p build
cd build
cmake ..
make
```

### 运行主程序

```bash
./bin/introsort <数组大小> <显示模式> <随机种子>
```

参数说明：

- 数组大小：要排序的整数数量
- 显示模式：0=完整显示，1=随机显示部分元素
- 随机种子：用于生成随机数的种子

示例：

```bash
./bin/introsort 1000 0 42
```

### 运行测试

```bash
./bin/test_sort
```

## 主要类

### Sort 类

实现基本的内省排序算法，支持升序和降序排序。

### ExSort 类

继承自 Sort 类，提供更友好的排序接口。

## 功能改进

原始代码存在的主要问题：

1. 插入排序实现不够高效，使用了较复杂的上界查找和旋转操作
2. 分区操作的逻辑复杂且不够鲁棒
3. 递归调用方式可能导致堆栈溢出
4. 没有针对边界情况的处理

本项目对这些问题进行了修复和优化，并添加了全面的测试用例。
